# threadpool-线程池

### 一、什么是线程池
线程池就是像一个池子一样，只不过里面放的不是水，而是线程，需要用线程的时候从池子里拿一个来用，不需要的时候就放回池子里。

### 二、为什么需要线程池
线程池的使用可以避免频繁的开启、关闭线程造成的开销。

### 三、如何实现
线程池有两个队列，一个空闲队列，一个忙队列。
线程池的实现原理是开始时启动指定数量的线程放到空闲线程队列中，如果有任务到来，就从空闲线程队列中拿一个来执行任务，同时将该线程加入到忙队列中去。
执行完任务后的线程不关闭，而是放回到空闲队列中去。

##### 1、线程池应该提供的接口
* 初始化接口，用于先创建指定数目的线程。

##### 2、线程池应该有的成员变量

### 四、我的疑问
虽然大概框架知道了，但是有一点不明白的是，线程池看起来和连接池似乎一样，但是仔细考虑却发现，连接可以释放了结果集，不关闭，放在那里，但是线程一直都在跑啊，怎么处理执行完任务后的线程呢？
这个问题的实现方法就是先提供一个线程函数，用于启动线程，该函数内部等待条件变量的可用，当有新任务添加进来的时候，调用pthread_cond_signal唤醒等待的线程，所有等待的线程中的一个根据获取的任务参数，使用函数指针调用相应的任务处理函数。
